<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<div th:fragment="fragment-body" style="padding: 20px;">
    <div class="sliderBox">
    </div>
    <div class="bodyWrapper">
        <section>
            <div class="category">
                <h1>카테고리 선택</h1>
                <form action="/" method="get" id="categoryForm">
                    <ul>
                        <li>
                            <input type="hidden" th:value="${params?.currentPageNo}" name="currentPageNo"/>
                            <input type="hidden" th:value="${params?.recordsPerPage}" name="recordsPerPage"/>
                            <input type="hidden" th:value="${params?.pageSize}" name="pageSize"/>
                            <input type="hidden" th:value="${params?.searchType}" name="searchType"/>
                            <span>인원수 선택 &nbsp; | </span>
                            <select id = "productCategoryNumberOfHouseholds" name = "cat1" class = "productCategoryNumberOfHouseholds">
                                <option value="">전체</option>
                                <option th:selected="${params?.cat1 eq 'single'}" value="single">single</option>
                                <option th:selected="${params?.cat1 eq 'couple'}" value="couple">couple</option>
                                <option th:selected="${params?.cat1 eq 'trio'}" value="trio">trio</option>
                                <option th:selected="${params?.cat1 eq 'squad'}" value="squad">squad</option>
                                <option th:selected="${params?.cat1 eq 'more'}" value="more">more</option>
                            </select>
                        </li>
                        <li>
                            <span>집형태 선택 &nbsp; | </span>
                            <select id = "productCategoryHomeScale" name = "cat2" class = "productCategoryHomeScale">
                                <option value="">전체</option>
                                <option th:selected="${params?.cat2 eq 'oneroom'}" value="oneroom">oneroom</option>
                                <option th:selected="${params?.cat2 eq 'villa'}" value="villa">villa</option>
                                <option th:selected="${params?.cat2 eq 'apartment'}" value="apartment">apartment</option>
                                <option th:selected="${params?.cat2 eq 'house'}" value="house">house</option>
                                <option th:selected="${params?.cat2 eq 'officetel'}" value="officetel">officetel</option>
                            </select>
                        </li>
                        <li>
                            <span>디자인 선택 &nbsp; | </span>
                            <select id = "productCategoryInterior" name = "cat3" class = "productCategoryInterior">
                                <option value="">전체</option>
                                <option th:selected="${params?.cat3 eq 'classic'}" value="classic">classic</option>
                                <option th:selected="${params?.cat3 eq 'modern'}" value="modern">modern</option>
                                <option th:selected="${params?.cat3 eq 'natural'}" value="natural">natural</option>
                                <option th:selected="${params?.cat3 eq 'vintage'}" value="vintage">vintage</option>
                            </select>
                        </li>
                        <li>
                            <h5 style="font-weight: 200; font-size: 1.5rem; margin: 0;">가격 선택</h5>
                            <div>
                                최소 :
                                <input type="text" placeholder="최소 가격" th:value="${params?.minPrice}" name="minPrice" class= "productCategoryPrice minPrice"/>
                                <div style="margin-top: 10px;"></div>
                                최대 :
                                <input type="text" placeholder="최대 가격" th:value="${params?.maxPrice}" name="maxPrice" class= "productCategoryPrice maxPrice"/>
                            </div>
                        </li>
                    </ul>
            </div>
            <div class="view">
                <div class="filterBox">
                    <div class="searchBox">
                        <input type="text" placeholder="상품명으로 검색" th:value="${params?.searchN}" name="searchN" id="searchBar"/>
                            <span class="sub-search-icon" style="cursor: pointer;" onclick="document.forms[0].submit()">
                                <label style="cursor: pointer;">
                                    <i class="xi-search"></i>
                                </label>
                            </span>
                        </form>
                    </div>
                    <div class="orderBox" th:if="${params != null and params.paginationInfo.totalRecordCount > 0}" th:object="${params.paginationInfo}" th:with="info=${params.paginationInfo}">
                        <span class="title"><i class="xi-align-justify"></i></span>
                        <a href="javascript:void(0)" th:onclick="movePage([[ ${#request.requestURI} ]], [[ ${params.makeQueryString(params?.currentPageNo, 'product_no', params?.cat1, params?.cat2, params?.cat3, params?.minPrice, params?.maxPrice)} ]])" class="order product_no" style="margin-left: 0;">최신순</a>
                        <a href="javascript:void(0)" th:onclick="movePage([[ ${#request.requestURI} ]], [[ ${params.makeQueryString(params?.currentPageNo, 'productPrice', params?.cat1, params?.cat2, params?.cat3, params?.minPrice, params?.maxPrice)} ]])" class="order productPrice">가격순</a>
                        <a href="javascript:void(0)" th:onclick="movePage([[ ${#request.requestURI} ]], [[ ${params.makeQueryString(params?.currentPageNo, 'likeNum', params?.cat1, params?.cat2, params?.cat3, params?.minPrice, params?.maxPrice)} ]])" class="order likeNum">추천순</a>
                        <a href="javascript:void(0)" th:onclick="movePage([[ ${#request.requestURI} ]], [[ ${params.makeQueryString(params?.currentPageNo, 'productView', params?.cat1, params?.cat2, params?.cat3, params?.minPrice, params?.maxPrice)} ]])" class="order productView">조회순</a>
                    </div>
                </div>
                <ul class="itemUl">
                    <li th:each="postList : ${postList}" class="itemLi">
                        <a th:href="'postInfo?post_no=' + ${postList.getProduct_no()}" class="itemLiLink">
                            <div class="imgBox">
                                <img th:src="${postList.getImg_url_main()}" style="width: 100%; height:100%;"/>
                            </div>
                            <ul class="productUl">
                                <li th:text="'상품명 : ' + ${postList.getProductName()}"></li>
                                <li th:text="${postList.getProductPrice()}" class="uiProductPrice"></li>
                                <li th:text="'조회수 : ' + ${postList.getProductView()}"></li>
                                <li th:text="'추천수 : ' + ${postList.getLikeNum()}"></li>
                                <li>
                                    카테고리 :
                                    <span th:if="${postList.getProductCategoryNumberOfHouseholds()}" th:text="${postList.getProductCategoryNumberOfHouseholds()}+ ', '"></span>
                                    <span th:if="${postList.getProductCategoryHomeScale()}" th:text="${postList.getProductCategoryHomeScale()}+ ', '"></span>
                                    <span th:if="${postList.getProductCategoryInterior()}" th:text="${postList.getProductCategoryInterior()}"></span>
                                    <!-- 카테고리가 전부 널일떄 -->
                                    <span th:if="!${postList.getProductCategoryNumberOfHouseholds()} and !${postList.getProductCategoryHomeScale()} and !${postList.getProductCategoryInterior()}">없음</span>
                                </li>
                            </ul>
                        </a>
                    </li>
                    <th:block layout:fragment="paging">
                        <nav th:replace="/fragments/pagination.html :: pagination"></nav>
                    </th:block>
                    <!-- 버튼클릭시 상태에 맞는 현재페이지 쿼리스트링 값 변경 -->
                    <th:block layout:fragment="script">
                        <script th:inline="javascript">
                            /*<![CDATA[*/
                            function movePage(uri, queryString) {
                                location.href = uri + queryString;
                            }
                            /*]]>*/
                        </script>
                    </th:block>
                </ul>
            </div>
        </section>
        <aside>
            <h1>광고</h1>
            <div class="advertisementBox">
            </div>
        </aside>
    </div>
</div>
</html>