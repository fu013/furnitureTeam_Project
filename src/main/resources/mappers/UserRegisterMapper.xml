<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
        >
<mapper namespace = "our.example.furniture.repository.UserRegisterMapper">
	<!-- 회원가입 db insert -->
	<insert id = "insertUserRegister">
		INSERT INTO userRegisterTable(userRegisterId, userRegisterPassword, userRegisterRePassword,
		userRegisterName, userRegisterBirth, userRegisterGender, userRegisterEmail,
		userRegisterPhone1, userRegisterPhone2, userRegisterPhone3)
		VALUES(#{userRegisterId}, #{userRegisterPassword}, #{userRegisterRePassword},
		#{userRegisterName}, #{userRegisterBirth}, #{userRegisterGender}, #{userRegisterEmail},
		#{userRegisterPhone1}, #{userRegisterPhone2}, #{userRegisterPhone3})
	</insert>

	<!-- 아이디 중복확인 버튼 -->
	<select id = "idOverlap" parameterType = "our.example.furniture.dto.UserRegisterDto" resultType = "String">
		SELECT userRegisterId FROM userRegisterTable WHERE userRegisterId = #{idOverlapCheck}
	</select>

	<!-- 이메일 중복확인 버튼 -->
	<select id = "emailOverlap" parameterType = "our.example.furniture.dto.UserRegisterDto" resultType = "String">
		SELECT userRegisterEmail FROM userRegisterTable WHERE userRegisterEmail = #{emailOverlapCheck}
	</select>

	<!-- 기존 비밀번호가 맞는지 체크(인증 절차) -->
	<select id = "passwordCheck" parameterType = "our.example.furniture.dto.UserRegisterDto" resultType = "String">
		SELECT userRegisterPassword FROM userRegisterTable WHERE userRegisterId = #{loginId} AND userRegisterPassword = #{userRegisterPassword}
	</select>

	<!-- 회원수정 - 유저정보 -->
	<select id="selectUserTable" resultType="our.example.furniture.dto.UserRegisterDto">
		SELECT
		*
		from
		userRegisterTable
		WHERE
		userRegisterId = #{loginId}
	</select>

	<!-- 회원정보수정 -->
	<update id = "userInfoChange" parameterType = "our.example.furniture.dto.UserRegisterDto">
		UPDATE
		userRegisterTable
		SET
		userRegisterPassword = #{userRegisterPassword},
		userRegisterName = #{userRegisterName},
		userRegisterEmail = #{userRegisterEmail},
		userRegisterPhone1 = #{userRegisterPhone1},
		userRegisterPhone2 = #{userRegisterPhone2},
		userRegisterPhone3 = #{userRegisterPhone3}
		WHERE
		userRegisterId = #{loginId}
	</update>

	<!-- 회원탈퇴 -->
	<delete id="userInfoDelete" parameterType = "our.example.furniture.dto.UserRegisterDto">
		DELETE
		FROM
		userRegisterTable
		WHERE
		userRegisterTable.userRegisterId = #{userRegisterId}
	</delete>
</mapper>
